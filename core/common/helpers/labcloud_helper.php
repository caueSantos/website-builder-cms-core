<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');if (!function_exists('labcloud_request')) {    function labcloud_request($url, $method = 'GET', $data = false, $headers = false, $returnInfo = true) {        $variavel = request($url, $method, $data, $headers, $returnInfo);        analisa_retorno_http($variavel['info']['http_code'], $url, $method);        return analisa_retorno_ws($variavel['contents'], $url, $method);    }}if (!function_exists('analisa_retorno_ws')) {    function analisa_retorno_ws($contents, $url, $method) {        $retorno = json_decode($contents);        $status = $retorno->status;        $codigo = $retorno->codigo;        switch ($status) {            case "success":                return $retorno->data;                break;            case "error":                $mensagem = $retorno->message;                if(is_lands()){                    $debug="<br><br>#{$url} #{$method}";                }                echo "<script> $.landsAlert({title:'Atenção!!',text:'{$mensagem} (código {$codigo}) {$debug}',icon:'error' ,buttons:[{text:'Fechar',onClick:function(){ $.landsAlert().close();  }}]}); </script>";                break;            default:                break;        }    }}if (!function_exists('analisa_retorno_http')) {    function analisa_retorno_http($codigo, $url, $method) {        switch ($codigo) {            case 200:                break;            default:                echo "<script> console.log($codigo); $.landsAlert({title:'Erro',text:'Erro http código {$codigo} na url {$url}_{$method}',icon:'error',buttons:[{text:'Fechar',onClick:function(){ $.landsAlert().close();  }}]}); </script>";                break;        }    }}if (!function_exists('super_request')) {    function super_request($url, $method = 'GET', $data = false, $headers = false, $returnInfo = true) {                $variavel = request($url, $method, $data, $headers, $returnInfo);                $variavel = json_decode($variavel['contents']);                if($url=='resultados'){//            ver($variavel->message);            if($variavel->data){                return $variavel->data;            } else {                return $variavel->message;            }        }        $var = $variavel->data;        return $var;    }}if (!function_exists('super_request_local')) {    function super_request_local($url, $method = 'GET', $data = false, $headers = false, $returnInfo = true) {                $variavel = request_local($url, $method, $data, $headers, $returnInfo);                $variavel = json_decode($variavel['contents']);                if($url=='resultados'){//            ver($variavel->message);            if($variavel->data){                return $variavel->data;            } else {                return $variavel->message;            }        }        $var = $variavel->data;        return $var;    }}if (!function_exists('request')) {    function request($url, $method = 'GET', $data = false, $headers = false, $returnInfo = true) {        $ch = curl_init();        $endpoint = 'https://plataforma.labcloud.com.br/ws/';        $url = str_replace(' ', '%20', $url);        $url = $endpoint . $url;        if (!$headers) {            $headers = array('x-api-key: tantofaz');        }        if ($method == 'POST') {            curl_setopt($ch, CURLOPT_URL, $url);            curl_setopt($ch, CURLOPT_POST, true);            if ($data !== false) {                $data = (is_array($data)) ? http_build_query($data) : $data;//                echo $data;//                echo "<br>";//                $data="Email_txf=clinica%40labcloud.com.br&Senha_txf=landsdigital12&origem=normal";//                echo $data;//                die();                curl_setopt($ch, CURLOPT_POSTFIELDS, $data);            }        } else {            if ($data !== false) {                if (is_array($data)) {                    $dataTokens = array();                    foreach ($data as $key => $value) {                        array_push($dataTokens, urlencode($key) . '=' . urlencode($value));                    }                    $data = implode('&', $dataTokens);                }                curl_setopt($ch, CURLOPT_URL, $url . '?' . $data);            } else {                curl_setopt($ch, CURLOPT_URL, $url);            }        }        curl_setopt($ch, CURLOPT_HEADER, false);        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);        curl_setopt($ch, CURLOPT_TIMEOUT, 10);        if ($headers !== false) {            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);        }        $contents = curl_exec($ch);        if ($returnInfo) {            $info = curl_getinfo($ch);        }        curl_close($ch);        if ($returnInfo) {            return array('contents' => $contents, 'info' => $info);        } else {            return $contents;        }    }}if (!function_exists('request_local')) {    function request_local($url, $method = 'GET', $data = false, $headers = false, $returnInfo = true) {        $ch = curl_init();        $endpoint = 'http://45.229.106.60/labcloud/plataforma/ws/';        $url = str_replace(' ', '%20', $url);        $url = $endpoint . $url;        if (!$headers) {            $headers = array('x-api-key: tantofaz');        }        if ($method == 'POST') {            curl_setopt($ch, CURLOPT_URL, $url);            curl_setopt($ch, CURLOPT_POST, true);            if ($data !== false) {                $data = (is_array($data)) ? http_build_query($data) : $data;//                echo $data;//                echo "<br>";//                $data="Email_txf=clinica%40labcloud.com.br&Senha_txf=landsdigital12&origem=normal";//                echo $data;//                die();                curl_setopt($ch, CURLOPT_POSTFIELDS, $data);            }        } else {            if ($data !== false) {                if (is_array($data)) {                    $dataTokens = array();                    foreach ($data as $key => $value) {                        array_push($dataTokens, urlencode($key) . '=' . urlencode($value));                    }                    $data = implode('&', $dataTokens);                }                curl_setopt($ch, CURLOPT_URL, $url . '?' . $data);            } else {                curl_setopt($ch, CURLOPT_URL, $url);            }        }        curl_setopt($ch, CURLOPT_HEADER, false);        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);        curl_setopt($ch, CURLOPT_TIMEOUT, 10);        if ($headers !== false) {            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);        }        $contents = curl_exec($ch);        if ($returnInfo) {            $info = curl_getinfo($ch);        }        curl_close($ch);        if ($returnInfo) {            return array('contents' => $contents, 'info' => $info);        } else {            return $contents;        }    }}