<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');if (!function_exists('busca_campos')) {    function busca_campos($campos) {        foreach ($campos as $campo) {            if (isset($campo->Label_txf)) {                echo "<label class='form-label'>" . $campo->Label_txf . "</label>";            }            switch ($campo->Tipo_sel) {                case 'textarea':                    if ($campo->Required_sel == 'SIM') {                        $required = "required";                    } else {                        $required = '';                    }                    echo "<textarea {$required} class='form-control {$campo->Classe_txf}' id='{$campo->Input_txf}' name='{$campo->Input_txf}' type='text' placeholder='{$campo->Placeholder_txf}'></textarea>";                    break;                case 'select':                    if ($campo->Required_sel == 'SIM') {                        $required = "required";                    } else {                        $required = '';                    }                    switch ($campo->Label_txf) {                        case 'Estado':                            echo "<select id='{$campo->Input_txf}' name='{$campo->Input_txf}' class='form-control {$campo->Classe_txf}'  {$required}>            <option value=''>Selecione o Estado</option>            <option value='AC'>AC</option>            <option value='AL'>AL</option>            <option value='AM'>AM</option>            <option value='AP'>AP</option>            <option value='BA'>BA</option>           <option value='CE'>CE</option>            <option value='DF'>DF</option>            <option value='ES'>ES</option>            <option value='GO'>GO</option>            <option value='MA'>MA</option>            <option value='MG'>MG</option>            <option value='MS'>MS</option>            <option value='MT'>MT</option>            <option value='PA'>PA</option>            <option value='PB'>PB</option>            <option value='PE'>PE</option>            <option value='PI'>PI</option>            <option value='PR'>PR</option>            <option value='RJ'>RJ</option>            <option value='RN'>RN</option>            <option value='RO'>RO</option>            <option value='RR'>RR</option>            <option value='RS'>RS</option>            <option value='SC'>SC</option>            <option value='SE'>SE</option>            <option value='SP'>SP</option>            <option value='TO'>TO</option>        </select> ";                            break;                        default:                            break;                    }                    break;                case 'custom':                    echo $campo->Html_sma;                    break;                default:                    if ($campo->Required_sel == 'SIM') {                        $required = "required";                    } else {                        $required = '';                    }                    echo "<input {$required} class='form-control  {$campo->Classe_txf}' id='{$campo->Input_txf}' name='{$campo->Input_txf}' type='{$campo->Tipo_sel}' placeholder='{$campo->Placeholder_txf}'/>";                    break;            }        }    }}if (!function_exists('cria_codigo_g')) {    function cria_codigo_g() {        $CI = & get_instance();        //busca codigo g existente        $sql = "select * from posicoes order by RAND() limit 1;";        $posicoes = $CI->mbc->executa_sql($sql);        $codigo = new stdClass();        $codigo->Codigo_txf = $posicoes[0]->Nome_txf;        //$codigo->Codigo_txf = $posicoes[0]->Nome_txf . '-' . generatePIN(4);        $codigo->Posicoes_for = $posicoes[0]->Id_int;        return $codigo;    }}if (!function_exists('codigo_g')) {    function codigo_g($email) {        $CI = & get_instance();        //busca codigo g existente        $sql = "select * from codigo_g where Email_txf='{$email}'";        $var = $CI->mbc->executa_sql($sql);        if ($var[0]) {            $posicao = $CI->mbc->buscar_completo('posicoes', "where Id_int = {$var[0]->Posicoes_for}");            $var[0]->Posicao = $posicao[0];            return $var[0];        } else {            $codigo = cria_codigo_g();            $array['Codigo_txf'] = $codigo->Codigo_txf;            $array['Email_txf'] = $email;            $array['Nome_txf'] = $_POST['Nome_txf'];            $array['Posicoes_for'] = $codigo->Posicoes_for;            $array['Data_dat'] = date('Y-m-d H:i:s');            $registro_inserido = $CI->mbc->db_insert('codigo_g', $array, TRUE);            if ($registro_inserido) {                $posicao = $CI->mbc->buscar_completo('posicoes', "where Id_int = {$registro_inserido->Posicoes_for}");                $registro_inserido->Posicao = $posicao[0];                return $registro_inserido;            }        }    }}